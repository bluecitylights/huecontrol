language: node_js
node_js:
  - "stable"

sudo: required

before_script:
  cd server

script:
  npm test

services:
  - docker

before install:  travis_wait 30 docker build -t bluecitylights\hueControl .


after_success:
  - if [ "$TRAVIS_BRANCH" == "seperate-server-folder" ]; then
    docker login -u "$DOCKER_USERNAME" -p "$DOCKER_PASSWORD";
    docker push USER/REPO;
    fi